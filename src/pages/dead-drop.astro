---
import PageHead from '@/components/PageHead.astro'
import Layout from '@/layouts/Layout.astro'
import { Icon } from 'astro-icon/components'
import Link from '@/components/Link.astro'
import { buttonVariants } from '@/components/ui/button'
---

<Layout class="max-w-3xl">
  <PageHead slot="head" title="Dead Drop" description="PGP-encrypted contact for sensitive communications." />
  
  <section class="flex flex-col gap-8">
    <div class="flex flex-col gap-4">
      <div>
        <h1 class="text-3xl md:text-4xl font-bold flex items-center gap-3">
          <Icon name="lucide:shield-check" class="size-8 text-primary" />
          Dead Drop
        </h1>
        <p class="text-sm text-muted-foreground font-mono mt-1">
          PGP-encrypted contact for sensitive communications
        </p>
      </div>
    </div>

    <div class="prose prose-sm dark:prose-invert max-w-none space-y-6">
      <div class="bg-muted/30 border border-border/50 rounded-lg p-4">
        <p class="text-sm text-muted-foreground leading-relaxed">
          For sensitive communications â€” security research, activist coordination, or anything that shouldn't go through normal channels.
        </p>
      </div>

      <h2 class="text-xl font-semibold">Current Key</h2>
      
      <div class="bg-black rounded-lg p-4 font-mono text-xs text-green-400 overflow-x-auto">
        <pre class="whitespace-pre-wrap break-all">-----BEGIN PGP PUBLIC KEY BLOCK-----

mQINBGcKj7MBEAC5...
[Key fingerprint: A1B2 C3D4 E5F6 7890 1234 5678 90AB CDEF]
-----END PGP PUBLIC KEY BLOCK-----</pre>
      </div>

      <div class="flex items-center gap-2 text-sm">
        <span class="text-muted-foreground">Fingerprint:</span>
        <code class="bg-muted px-2 py-1 rounded text-xs">A1B2 C3D4 E5F6 7890 1234 5678 90AB CDEF</code>
      </div>

      <h2 class="text-xl font-semibold mt-8">How To Use</h2>
      
      <ol class="space-y-3 text-muted-foreground">
        <li>
          <strong class="text-foreground">1. Import the key</strong>
          <p class="text-sm mt-1">
            Download the public key above and import it into your PGP tool (GPG, Kleopatra, or ProtonMail).
          </p>
        </li>
        <li>
          <strong class="text-foreground">2. Compose your message</strong>
          <p class="text-sm mt-1">
            Write your message locally. Include a way for me to reply if needed.
          </p>
        </li>
        <li>
          <strong class="text-foreground">3. Encrypt and send</strong>
          <p class="text-sm mt-1">
            Encrypt to the above key, then email to: <code class="bg-muted px-1 rounded">dead-drop@gemcity.xyz</code>
          </p>
        </li>
      </ol>

      <div class="border-t border-border pt-6 mt-8">
        <h3 class="text-lg font-semibold mb-3">Key Rotation</h3>
        <p class="text-sm text-muted-foreground">
          This key rotates quarterly. Check back here for the latest key before sending sensitive material. 
          Old keys are kept active for 30 days after rotation.
        </p>
      </div>

      <div class="flex items-center gap-2 pt-4">
        <Link href="/" class={buttonVariants({ variant: 'outline' })}>
          <Icon name="lucide:arrow-left" class="size-4 mr-2" />
          Back to home
        </Link>
      </div>
    </div>
  </section>
</Layout>
